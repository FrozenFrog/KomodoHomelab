services:
  agent:
    image: "ghcr.io/yusing/godoxy-agent:latest"
    container_name: godoxy-agent
    restart: always
    network_mode: host # do not change this
    environment:
      DOCKER_SOCKET: "/var/run/docker.sock"
      RUNTIME: "docker"
      AGENT_NAME: ${AGENT_NAME}
      AGENT_PORT: "8891"
      AGENT_CA_CERT: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJsakNDQVR5Z0F3SUJBZ0lSQUlubzI4UVlJMDluZ0grWWI2aFVtYW93Q2dZSUtvWkl6ajBFQXdJd0tERVAKTUEwR0ExVUVDaE1HUjI5RWIzaDVNUlV3RXdZRFZRUURFd3huYjJSdmVIa3VZV2RsYm5Rd0lCY05Nall3TVRBNApNVEl6TlRFd1doZ1BNekF5TmpBeE1EZ3hNak0xTVRCYU1DZ3hEekFOQmdOVkJBb1RCa2R2Ukc5NGVURVZNQk1HCkExVUVBeE1NWjI5a2IzaDVMbUZuWlc1ME1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRTgzN3QKdmZjRXg5eVkzOXp0STlpS2FPNEVMWE5UQ0k4Wm1qUnFKQ1pYSWtqM09PamFnN3ZYMmlkcTI2K0t2ZytqRzlMcApKUnR0QWttdkhCQ0dLYlI2UXFORk1FTXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CSUdBMVVkRXdFQi93UUlNQVlCCkFmOENBUUF3SFFZRFZSME9CQllFRkUvQ1dYU0R3UC9CbG5OS1RCYzlDTmJOdDlROU1Bb0dDQ3FHU000OUJBTUMKQTBnQU1FVUNJRkFtK28reVZrWDVUSU9iM2JsTzZjWnJKTWZhRVhwK05wYWNpaHUvYjdZL0FpRUFsdzUzeGRvQgpzaGNZOXROWHAycWUzK2xRb2lnSXRRWXJxcDdtUWU3V2NCWT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=;LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUpxZG9idmxvSDM5L2xLZXpzZDAzMTBqR0MrZVp1c0l4UVdHY0xhSGxoTkRvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFODM3dHZmY0V4OXlZMzl6dEk5aUthTzRFTFhOVENJOFptalJxSkNaWElrajNPT2phZzd2WAoyaWRxMjYrS3ZnK2pHOUxwSlJ0dEFrbXZIQkNHS2JSNlFnPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo="
      AGENT_SSL_CERT: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJvVENDQVVlZ0F3SUJBZ0lRTlMrVXAzcWZuMWVOYjZUb1g3YWxJVEFLQmdncWhrak9QUVFEQWpBb01ROHcKRFFZRFZRUUtFd1pIYjBSdmVIa3hGVEFUQmdOVkJBTVRER2R2Wkc5NGVTNWhaMlZ1ZERBZ0Z3MHlOakF4TURneApNak0xTVRCYUdBOHpNREkyTURFd09ERXlNelV4TUZvd09URVBNQTBHQTFVRUNoTUdSMjlFYjNoNU1ROHdEUVlEClZRUUxFd1pUWlhKMlpYSXhGVEFUQmdOVkJBTVRER2R2Wkc5NGVTNWhaMlZ1ZERCWk1CTUdCeXFHU000OUFnRUcKQ0NxR1NNNDlBd0VIQTBJQUJQMGNLR2tFVkk0b2hSRkM4cGRsZERNYkF6VmZhVVNiemxWa2NrQ2hNNHRzWWMvWQorOHdpakRXNHh2SmtiT1Z6ZzFNcC9vaVVFUnYyV0E4a05mUUFacWlqUURBK01BNEdBMVVkRHdFQi93UUVBd0lICmdEQVRCZ05WSFNVRUREQUtCZ2dyQmdFRkJRY0RBVEFYQmdOVkhSRUVFREFPZ2d4bmIyUnZlSGt1WVdkbGJuUXcKQ2dZSUtvWkl6ajBFQXdJRFNBQXdSUUloQU1yK2JNNjJKTTVtakJQaDNRU3p0eUcrVDZWeXhRYWdXdldEdG1tUApWVDkvQWlCcGlzQ2pFeExZRVpMOUtMWWY0UVduTjkrRFNqdXRialBGWDJ5TVd3cEhhdz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K;LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUZLZUk1TWIvVUYyZVZ6aXFCbllOR2hBSEZFMTMrWXhWcnZTMFpma01hSklvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFL1J3b2FRUlVqaWlGRVVMeWwyVjBNeHNETlY5cFJKdk9WV1J5UUtFemkyeGh6OWo3ekNLTQpOYmpHOG1SczVYT0RVeW4raUpRUkcvWllEeVExOUFCbXFBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo="
      # use agent as a docker socket proxy: [host]:port
      # set LISTEN_ADDR to enable (e.g. 127.0.0.1:2375)
      LISTEN_ADDR:
      POST: false
      ALLOW_RESTARTS: false
      ALLOW_START: false
      ALLOW_STOP: false
      AUTH: false
      BUILD: false
      COMMIT: false
      CONFIGS: false
      CONTAINERS: false
      DISTRIBUTION: false
      EVENTS: true
      EXEC: false
      GRPC: false
      IMAGES: false
      INFO: false
      NETWORKS: false
      NODES: false
      PING: true
      PLUGINS: false
      SECRETS: false
      SERVICES: false
      SESSION: false
      SWARM: false
      SYSTEM: false
      TASKS: false
      VERSION: true
      VOLUMES: false
    volumes:
      - type: bind
        source: /var/run/docker.sock
        target: /var/run/docker.sock
      - type: bind
        source: ${BASEPATH}/${APP_CONFIG_PATH}/agents
        target: /app/data
